# World Creation Wizard

Пошаговый мастер создания игрового мира с AI-ассистентом.

## Расположение файлов

- **Wizard**: `frontend/src/components/world-creation/wizard/Wizard.tsx`
- **Шаги**: `frontend/src/components/world-creation/wizard/steps/`
  - `SettingSelection.tsx` - выбор сеттинга
  - `WorldInput.tsx` - описание мира
  - `QuestionForm.tsx` - уточняющие вопросы
  - `WorldReview.tsx` - проверка и сохранение
- **Backend агенты**: `src/services/world-creation/agents/`
  - `analysis.agent.ts` - анализ ввода и генерация вопросов
  - `generation.agent.ts` - генерация данных мира

## Шаги создания мира

### 1. Выбор сеттинга

Доступные сеттинги с уникальными визуальными стилями:

- Фэнтези (золотой/пурпурный акцент)
- Научная фантастика (голубой акцент)
- Хоррор (красный акцент)
- Стимпанк (золотой/коричневый акцент)
- Постапокалипсис (зелёный акцент)
- Своя вселенная (мультицветный градиент)

Карточки имеют анимации при выборе и наведении, фоновые паттерны, плавающие иконки.

### 2. Описание мира

Пользователь вводит описание желаемого мира. Поддерживаются команды:

- "Удиви меня" / "Решай сам" - автогенерация

### 3. Уточнение деталей

AI анализирует ввод и задаёт уточняющие вопросы на выбранном языке (русский/английский).
Вопросы можно пропустить или ответить "решай сам".

### 4. Проверка и сохранение

Редактирование сгенерированных данных:

- Обзор (название, жанр, атмосфера, описание)
- Фракции
- Локации
- Расы
- История
- Магия

## Выход из wizard

Кнопка выхода в левом верхнем углу. При наличии прогресса показывается диалог подтверждения с предупреждением о потере данных.

## Языковые настройки

Язык вопросов и генерации определяется настройкой `llmOutputLanguage` в `data/api-settings/api-settings.json`.
Инструкция по языку передаётся в промпт агента анализа (`analysis.agent.ts`).

## API endpoints

- `POST /world-creation/agent/start` - начало сессии
- `POST /world-creation/agent/analyze` - анализ ввода
- `POST /world-creation/agent/submit-answers` - отправка ответов
- `POST /world-creation/agent/save` - сохранение мира
